webpackJsonp([8],{735:function(n,i,a){"use strict";function l(n){return o._33(0,[(n()(),o._10(0,0,null,null,1,"h2",[["class","aviso"],["padding",""],["text-center",""]],null,null,null,null,null)),(n()(),o._31(-1,null,["Nenhum registro encontrado."]))],null,null)}function e(n){return o._33(0,[(n()(),o._10(0,0,null,null,37,"ion-item",[["class","item item-block"],["default-item",""],["no-lines",""]],null,null,null,S.b,S.a)),o._9(1,278528,null,0,x.h,[o.w,o.x,o.n,o.K],{ngClass:[0,"ngClass"]},null),o._25(2,{"novo-item":0,"item-removido":1}),o._9(3,1097728,null,3,D.a,[A.a,k.a,o.n,o.J,[2,U.a]],null,null),o._29(335544320,2,{contentLabel:0}),o._29(603979776,3,{_buttons:1}),o._29(603979776,4,{_icons:1}),o._9(7,16384,null,0,C.a,[],null,null),(n()(),o._31(-1,2,["\n                        "])),(n()(),o._10(9,0,null,2,27,"ion-row",[["class","espacamento row"]],null,null,null,null,null)),o._9(10,16384,null,0,J.a,[],null,null),(n()(),o._31(-1,null,["\n                            "])),(n()(),o._10(12,0,null,null,16,"ion-col",[["class","col"],["col-10",""]],null,[[null,"click"]],function(n,i,a){var l=!0;if("click"===i){l=!1!==n.component.editar(n.context.$implicit)&&l}return l},null,null)),o._9(13,16384,null,0,z.a,[],null,null),(n()(),o._31(-1,null,["\n                                "])),(n()(),o._10(15,0,null,null,2,"h2",[["item-title",""],["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(16,null,["Data da descrição: ",""])),o._26(17,2),(n()(),o._31(-1,null,["\n                                "])),(n()(),o._10(19,0,null,null,1,"h2",[["item-title",""],["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(20,null,["Descrição: ",""])),(n()(),o._31(-1,null,["\n                                "])),(n()(),o._10(22,0,null,null,2,"h2",[["item-title",""],["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(23,null,["Data da tratativa: ",""])),o._26(24,2),(n()(),o._31(-1,null,["\n                                "])),(n()(),o._10(26,0,null,null,1,"h2",[["item-title",""],["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(27,null,["Tratativa: ",""])),(n()(),o._31(-1,null,["\n                            "])),(n()(),o._31(-1,null,["\n                            "])),(n()(),o._10(30,0,null,null,5,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),o._9(31,16384,null,0,z.a,[],null,null),(n()(),o._31(-1,null,["\n                                "])),(n()(),o._10(33,0,null,null,1,"ion-icon",[["icon-small",""],["item-right",""],["name","more"],["role","img"],["style","font-size: 32px !important; margin: 0px"]],[[2,"hide",null]],[[null,"click"]],function(n,i,a){var l=!0;if("click"===i){l=!1!==n.component.exibirOpcoes(n.context.$implicit)&&l}return l},null,null)),o._9(34,147456,null,0,T.a,[k.a,o.n,o.J],{name:[0,"name"]},null),(n()(),o._31(-1,null,["\n                            "])),(n()(),o._31(-1,null,["\n                        "])),(n()(),o._31(-1,2,["\n                    "]))],function(n,i){n(i,1,0,n(i,2,0,!i.context.$implicit.id,i.context.$implicit.delete));n(i,34,0,"more")},function(n,i){n(i,16,0,i.context.$implicit.dataDescricao?o._32(i,16,0,n(i,17,0,o._22(i.parent,0),i.context.$implicit.dataDescricao,"dd/MM/yyyy")):"--");n(i,20,0,i.context.$implicit.descricao);n(i,23,0,i.context.$implicit.dataTratativa?o._32(i,23,0,n(i,24,0,o._22(i.parent,0),i.context.$implicit.dataTratativa,"dd/MM/yyyy")):"--");n(i,27,0,i.context.$implicit.tratativa);n(i,33,0,o._22(i,34)._hidden)})}function t(n){return o._33(0,[o._24(0,x.d,[o.y]),(n()(),o._10(1,0,null,null,23,"ion-header",[],null,null,null,null,null)),o._9(2,16384,null,0,M.a,[k.a,o.n,o.J,[2,$.a]],null,null),(n()(),o._31(-1,null,["\n    "])),(n()(),o._10(4,0,null,null,19,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,B.b,B.a)),o._9(5,49152,null,0,E.a,[N.a,[2,$.a],[2,P.a],k.a,o.n,o.J],null,null),(n()(),o._31(-1,3,["\n        "])),(n()(),o._10(7,0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(n,i,a){var l=!0;if("click"===i){l=!1!==o._22(n,9).toggle()&&l}return l},j.b,j.a)),o._9(8,1097728,[[1,4]],0,R.a,[[8,""],k.a,o.n,o.J],null,null),o._9(9,1064960,null,0,q.a,[H.a,[2,$.a],[2,R.a],[2,E.a]],{menuToggle:[0,"menuToggle"]},null),o._9(10,16384,null,1,F.a,[k.a,o.n,o.J,[2,V.a],[2,E.a]],null,null),o._29(603979776,1,{_buttons:1}),(n()(),o._31(-1,0,["\n            "])),(n()(),o._10(13,0,null,0,1,"ion-icon",[["class","icon-menu"],["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._9(14,147456,null,0,T.a,[k.a,o.n,o.J],{name:[0,"name"]},null),(n()(),o._31(-1,0,["\n        "])),(n()(),o._31(-1,3,["\n        "])),(n()(),o._10(17,0,null,3,5,"div",[["buy",""]],null,null,null,null,null)),(n()(),o._31(-1,null,["\n            "])),(n()(),o._10(19,0,null,null,2,"ion-title",[],null,null,null,W.b,W.a)),o._9(20,49152,null,0,K.a,[k.a,o.n,o.J,[2,V.a],[2,E.a]],null,null),(n()(),o._31(-1,0,["Ocorrências"])),(n()(),o._31(-1,null,["\n        "])),(n()(),o._31(-1,3,["\n    "])),(n()(),o._31(-1,null,["\n"])),(n()(),o._31(-1,null,["\n\n"])),(n()(),o._10(26,0,null,null,35,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,L.b,L.a)),o._9(27,4374528,null,0,X.a,[k.a,Q.a,Y.a,o.n,o.J,N.a,Z.a,o.C,[2,$.a],[2,P.a]],null,null),(n()(),o._31(-1,1,["\n    "])),(n()(),o._10(29,0,null,1,1,"h2",[["class","broadcomb"],["text-center",""],["text-wrap",""]],null,null,null,null,null)),(n()(),o._31(30,null,["",""])),(n()(),o._31(-1,1,["\n    "])),(n()(),o._5(16777216,null,1,1,null,l)),o._9(33,16384,null,0,x.j,[o.T,o.P],{ngIf:[0,"ngIf"]},null),(n()(),o._31(-1,1,["\n    "])),(n()(),o._10(35,0,null,1,25,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),o._9(36,16384,null,0,nn.a,[],null,null),(n()(),o._31(-1,null,["\n        "])),(n()(),o._10(38,0,null,null,6,"ion-row",[["class","row"]],null,null,null,null,null)),o._9(39,16384,null,0,J.a,[],null,null),(n()(),o._31(-1,null,["\n            "])),(n()(),o._10(41,0,null,null,2,"button",[["block",""],["box-shadow",""],["class","button-novo"],["default-button",""],["ion-button",""],["margin-bottom",""],["text-capitalize",""]],null,[[null,"click"]],function(n,i,a){var l=!0;if("click"===i){l=!1!==n.component.novaOcorrencia()&&l}return l},j.b,j.a)),o._9(42,1097728,null,0,R.a,[[8,""],k.a,o.n,o.J],{block:[0,"block"]},null),(n()(),o._31(-1,0,["Nova ocorrência"])),(n()(),o._31(-1,null,["\n        "])),(n()(),o._31(-1,null,["\n        "])),(n()(),o._10(46,0,null,null,13,"ion-row",[["class","row"]],null,null,null,null,null)),o._9(47,16384,null,0,J.a,[],null,null),(n()(),o._31(-1,null,["\n            "])),(n()(),o._10(49,0,null,null,9,"ion-col",[["class","col"],["col-12",""]],null,null,null,null,null)),o._9(50,16384,null,0,z.a,[],null,null),(n()(),o._31(-1,null,["\n                "])),(n()(),o._10(52,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),o._9(53,16384,null,0,an.a,[k.a,o.n,o.J,Q.a,ln.l,Y.a],null,null),(n()(),o._31(-1,null,["\n                    "])),(n()(),o._5(16777216,null,null,1,null,e)),o._9(56,802816,null,0,x.i,[o.T,o.P,o.w],{ngForOf:[0,"ngForOf"]},null),(n()(),o._31(-1,null,["\n                "])),(n()(),o._31(-1,null,["\n            "])),(n()(),o._31(-1,null,["\n        "])),(n()(),o._31(-1,null,["\n    "])),(n()(),o._31(-1,1,["\n"]))],function(n,i){var a=i.component;n(i,9,0,"");n(i,14,0,"menu");n(i,33,0,a.inspecao.ocorrencias.length<1);n(i,42,0,"");n(i,56,0,a.inspecao.ocorrencias)},function(n,i){var a=i.component;n(i,4,0,o._22(i,5)._hidden,o._22(i,5)._sbPadding);n(i,7,0,o._22(i,9).isHidden);n(i,13,0,o._22(i,14)._hidden);n(i,26,0,o._22(i,27).statusbarPadding,o._22(i,27)._hasRefresher);n(i,30,0,a.broadcomb.toUpperCase())})}Object.defineProperty(i,"__esModule",{value:!0});var o=a(2),r=(a(0),a(55),a(783)),c=a(83),u=a(86),s=a(799),d=a(766),p=a(767),_=a(782),h=function(){function n(n,i,a,l,e,t){this.navParams=n,this.storage=i,this.viewCtrl=a,this.actionSheetCtrl=l,this.modalCtrl=e,this.messageService=t,this.inspecao=new r.a,this.servico=new _.a,this.ocorrenciaBackup=new s.a,this.inspecao=n.data.inspecao,this.servico=n.data.servico,this.broadcomb=n.data.broadcomb}return n.prototype.exibirOpcoes=function(n){var i=this;this.actionSheetCtrl.create({buttons:[{text:"Editar",handler:function(){i.editar(n)}},{text:n.delete?"Reativar":"Excluir",handler:function(){i.confirmarExclusao(n)}},{text:"Cancelar",role:"cancel"}]}).present()},n.prototype.novaOcorrencia=function(){var n=this,i=this.modalCtrl.create("ManterOcorrenciaPage",{ocorrencia:new r.a});i.present(),i.onWillDismiss(function(i){i&&(i.idGuidOcorrencia=p.UUID.UUID(),i.idInspecaoObra=n.inspecao.id,i.idGuidInspecao=n.inspecao.idGuidInspecao,n.inspecao.ocorrencias.unshift(i),n.gerarNovaOcorrencia(i))})},n.prototype.gerarNovaOcorrencia=function(n){var i=this;this.storage.ready().then(function(){var a=[];i.storage.get("atualizacoes").then(function(l){var e=new d.a({id:p.UUID.UUID(),idOcorrencia:n.id,idGuidOcorrencia:n.idGuidOcorrencia,idInspecao:i.inspecao.id,idGuidInspecao:i.inspecao.idGuidInspecao,idArea:i.servico.idArea,idGuidArea:i.servico.idAreaGuid,idServico:i.servico.id,idGuidServico:i.servico.idGuidServico,tipo:"Insert",entidade:"Ocorrencia",valor:JSON.stringify(n),data:new Date,descricao:"Criação da ocorrência '"+n.descricao+"' em '"+i.broadcomb+"'.",obraId:i.servico.idObra});l?(a=l).push(e):a.push(e),i.storage.set("atualizacoes",a),i.atualizarOcorrenciaCriacao(n)})})},n.prototype.atualizarOcorrenciaCriacao=function(n){var i=this;this.storage.ready().then(function(){i.storage.get("obras").then(function(a){a.find(function(n){return n.id==i.servico.idObra}).areas.find(function(n){return i.servico.idAreaGuid?n.idGuid==i.servico.idAreaGuid:n.id==i.servico.idArea}).servicos.find(function(n){return i.servico.idGuidServico?n.idGuidServico==i.servico.idGuidServico:n.id==i.servico.id}).inspecoesObra.find(function(n){return i.inspecao.idGuidInspecao?n.idGuidInspecao==i.inspecao.idGuidInspecao:n.id==i.inspecao.id}).ocorrencias.unshift(n),i.storage.set("obras",a)})})},n.prototype.editar=function(n){var i=this,a=this.modalCtrl.create("ManterOcorrenciaPage",{ocorrencia:n});this.ocorrenciaBackup=new s.a(n),a.present(),a.onWillDismiss(function(n){if(n)i.editarOcorrencias(n);else{var a=i.inspecao.ocorrencias.find(function(n){return i.ocorrenciaBackup.idGuidOcorrencia?n.idGuidOcorrencia==i.ocorrenciaBackup.idGuidOcorrencia:n.id==i.ocorrenciaBackup.id});a.dataDescricao=i.ocorrenciaBackup.dataDescricao,a.descricao=i.ocorrenciaBackup.descricao,a.dataTratativa=i.ocorrenciaBackup.dataTratativa,a.tratativa=i.ocorrenciaBackup.tratativa}})},n.prototype.editarOcorrencias=function(n){var i=this;this.storage.ready().then(function(){var a=[];i.storage.get("atualizacoes").then(function(l){var e=new d.a({id:p.UUID.UUID(),idOcorrencia:n.id,idGuidOcorrencia:n.idGuidOcorrencia,idInspecao:i.inspecao.id,idGuidInspecao:i.inspecao.idGuidInspecao,idArea:i.servico.idArea,idGuidArea:i.servico.idAreaGuid,idServico:i.servico.id,idGuidServico:i.servico.idGuidServico,tipo:"Update",entidade:"Ocorrencia",valor:JSON.stringify(n),data:new Date,descricao:"Edição da ocorrência '"+n.descricao+"' em '"+i.broadcomb+"'.",obraId:i.servico.idObra});l?(a=l).push(e):a.push(e),i.storage.set("atualizacoes",a),i.atualizarOcorrenciaEdicao(n)})})},n.prototype.atualizarOcorrenciaEdicao=function(n){var i=this;this.storage.ready().then(function(){i.storage.get("obras").then(function(a){var l=a.find(function(n){return n.id==i.servico.idObra}).areas.find(function(n){return i.servico.idAreaGuid?n.idGuid==i.servico.idAreaGuid:n.id==i.servico.idArea}).servicos.find(function(n){return i.servico.idGuidServico?n.idGuidServico==i.servico.idGuidServico:n.id==i.servico.id}).inspecoesObra.find(function(n){return i.inspecao.idGuidInspecao?n.idGuidInspecao==i.inspecao.idGuidInspecao:n.id==i.inspecao.id}).ocorrencias.find(function(i){return i.idGuidOcorrencia?i.idGuidOcorrencia==n.idGuidOcorrencia:i.id==n.id});l.dataDescricao=n.dataDescricao,l.descricao=n.descricao,l.dataTratativa=n.dataTratativa,l.tratativa=n.tratativa,i.storage.set("obras",a)})})},n.prototype.confirmarExclusao=function(n){var i=this;this.messageService.exibirMensagemConfirmacao(n.delete?"Deseja realmente reativar a ocorrência selecionada?":"Deseja realmente excluir a ocorrência selecionada?",function(){i.alterarSituacaoOcorrencia(n)})},n.prototype.alterarSituacaoOcorrencia=function(n){var i=this;this.storage.ready().then(function(){var a=[];i.storage.get("atualizacoes").then(function(l){n.delete=!n.delete;var e=new d.a({id:p.UUID.UUID(),idOcorrencia:n.id,idGuidOcorrencia:n.idGuidOcorrencia,idInspecao:i.inspecao.id,idGuidInspecao:i.inspecao.idGuidInspecao,idServico:i.servico.id,idGuidServico:i.servico.idGuidServico,tipo:"Update",entidade:"Ocorrencia",valor:JSON.stringify(n),data:new Date,descricao:(n.delete?"Inativação":"Ativação")+" da ocorrência '"+n.descricao+"' em '"+i.broadcomb.toUpperCase()+"'."});l?(a=l).push(e):a.push(e),i.storage.set("atualizacoes",a),i.atualizarOcorrenciaSituacao(n)})})},n.prototype.atualizarOcorrenciaSituacao=function(n){var i=this;this.storage.ready().then(function(){i.storage.get("obras").then(function(a){a.find(function(n){return n.id==i.servico.idObra}).areas.find(function(n){return i.servico.idAreaGuid?n.idGuid==i.servico.idAreaGuid:n.id==i.servico.idArea}).servicos.find(function(n){return i.servico.idGuidServico?n.idGuidServico==i.servico.idGuidServico:n.id==i.servico.id}).inspecoesObra.find(function(n){return i.inspecao.idGuidInspecao?n.idGuidInspecao==i.inspecao.idGuidInspecao:n.id==i.inspecao.id}).ocorrencias.find(function(i){return n.idGuidOcorrencia?i.idGuidOcorrencia==n.idGuidOcorrencia:i.id==n.id}).delete=n.delete,i.storage.set("obras",a)})})},n}(),v=function(){return function(){}}(),f=a(190),m=a(191),b=a(192),g=a(193),G=a(194),O=a(195),I=a(196),w=a(197),y=a(198),S=a(129),x=a(15),D=a(24),A=a(21),k=a(3),U=a(50),C=a(60),J=a(81),z=a(82),T=a(36),M=a(131),$=a(7),B=a(360),E=a(39),N=a(12),P=a(29),j=a(38),R=a(27),q=a(201),H=a(33),F=a(132),V=a(51),W=a(359),K=a(84),L=a(199),X=a(30),Q=a(6),Y=a(13),Z=a(32),nn=a(130),an=a(56),ln=a(10),en=a(16),tn=a(138),on=a(91),rn=o._8({encapsulation:2,styles:[],data:{}}),cn=o._6("page-ocorrencia",h,function(n){return o._33(0,[(n()(),o._10(0,0,null,null,1,"page-ocorrencia",[],null,null,null,t,rn)),o._9(1,49152,null,0,h,[en.a,c.b,$.a,tn.a,on.a,u.a],null,null)],null,null)},{},{},[]),un=a(20),sn=a(128),dn=a(49);a.d(i,"OcorrenciaPageModuleNgFactory",function(){return pn});var pn=o._7(v,[],function(n){return o._18([o._19(512,o.k,o._3,[[8,[f.a,m.a,b.a,g.a,G.a,O.a,I.a,w.a,y.a,cn]],[3,o.k],o.A]),o._19(4608,x.l,x.k,[o.y,[2,x.u]]),o._19(4608,un.r,un.r,[]),o._19(4608,un.d,un.d,[]),o._19(512,x.b,x.b,[]),o._19(512,un.p,un.p,[]),o._19(512,un.e,un.e,[]),o._19(512,un.n,un.n,[]),o._19(512,sn.a,sn.a,[]),o._19(512,sn.b,sn.b,[]),o._19(512,v,v,[]),o._19(256,dn.a,h,[])])})},766:function(n,i,a){"use strict";a.d(i,"a",function(){return l});var l=function(){return function(n){void 0===n&&(n={}),Object.assign(this,n)}}()},767:function(n,i,a){"use strict";i.UUID=function(){function n(){}return n.UUID=function(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var n=new Uint16Array(8);return window.crypto.getRandomValues(n),this.pad4(n[0])+this.pad4(n[1])+"-"+this.pad4(n[2])+"-"+this.pad4(n[3])+"-"+this.pad4(n[4])+"-"+this.pad4(n[5])+this.pad4(n[6])+this.pad4(n[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},n.pad4=function(n){for(var i=n.toString(16);i.length<4;)i="0"+i;return i},n.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},n}()},782:function(n,i,a){"use strict";a.d(i,"a",function(){return l});var l=function(){return function(n){void 0===n&&(n={}),this.id=0,this.idGuidServico="",this.descricao="",this.tipo="",this.idObra=0,this.idChecklist=0,this.idArea=0,this.idAreaGuid="",this.metaAprovacao=90,this.status=0,this.situacao="Em aberto",this.delete=!1,this.dataHoraInclusao=new Date,this.dataHoraAlteracao=new Date,this.inspecoesObra=[],this.itensChecklistServico=[],Object.assign(this,n)}}()},783:function(n,i,a){"use strict";a.d(i,"a",function(){return l});var l=function(){return function(n){void 0===n&&(n={}),this.id=0,this.idGuidInspecao="",this.campo1="",this.campo2="",this.campo3="",this.campo4="",this.status=0,this.situacao="Em aberto",this.delete=!1,this.dataHoraAlteracao=new Date,this.qtdNA=0,this.qtdA=0,this.qtdR=0,this.qtdRA=0,this.qtdX=0,this.inspecaoObraItens=[],this.ocorrencias=[],Object.assign(this,n)}}()},799:function(n,i,a){"use strict";a.d(i,"a",function(){return l});var l=function(){return function(n){void 0===n&&(n={}),this.id=0,this.idGuidOcorrencia="",this.idInspecaoObra=0,this.idGuidInspecao="",this.descricao="",this.tratativa="",this.dataHoraAlteracao=new Date,Object.assign(this,n)}}()}});