<<<<<<< HEAD
{"version":3,"sources":["../../src/pages/area/cadastro/area-cadastro.module.ts","../../node_modules/angular2-uuid/index.js","../../src/models/alteracao.ts","../../src/models/servico.ts","../../src/models/area.ts","../../src/pages/area/cadastro/area-cadastro.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AreaCadastroPage } from './area-cadastro';\nimport { IonicSelectableModule } from 'ionic-selectable';\n\n@NgModule({\n  declarations: [\n    AreaCadastroPage\n  ],\n  imports: [\n    IonicPageModule.forChild(AreaCadastroPage),\n    IonicSelectableModule\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\n\nexport class AreaCadastroPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/area/cadastro/area-cadastro.module.ts","\"use strict\";\nvar UUID = (function () {\n    function UUID() {\n        // no-op\n    }\n    UUID.UUID = function () {\n        if (typeof (window) !== \"undefined\" && typeof (window.crypto) !== \"undefined\" && typeof (window.crypto.getRandomValues) !== \"undefined\") {\n            // If we have a cryptographically secure PRNG, use that\n            // http://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript\n            var buf = new Uint16Array(8);\n            window.crypto.getRandomValues(buf);\n            return (this.pad4(buf[0]) + this.pad4(buf[1]) + \"-\" + this.pad4(buf[2]) + \"-\" + this.pad4(buf[3]) + \"-\" + this.pad4(buf[4]) + \"-\" + this.pad4(buf[5]) + this.pad4(buf[6]) + this.pad4(buf[7]));\n        }\n        else {\n            // Otherwise, just use Math.random\n            // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n            // https://stackoverflow.com/questions/11605068/why-does-jshint-argue-against-bitwise-operators-how-should-i-express-this-code\n            return this.random4() + this.random4() + \"-\" + this.random4() + \"-\" + this.random4() + \"-\" +\n                this.random4() + \"-\" + this.random4() + this.random4() + this.random4();\n        }\n    };\n    UUID.pad4 = function (num) {\n        var ret = num.toString(16);\n        while (ret.length < 4) {\n            ret = \"0\" + ret;\n        }\n        return ret;\n    };\n    UUID.random4 = function () {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    };\n    return UUID;\n}());\nexports.UUID = UUID;\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/angular2-uuid/index.js\n// module id = 781\n// module chunks = 4 5 9 10 11 12 14 15 18","export class Alteracao {\n    \n    id: string;\n    obraId: number;\n\n    idArea: number;\n    idGuidArea: string;\n\n    idServico: number;\n    idGuidServico: string;\n\n    idInspecao: number;\n    idGuidInspecao: string;\n\n    idOcorrencia: number;\n    idGuidOcorrencia: string;\n\n    idRealizadoPor: number;\n    idGuidRealizadoPor: string;\n\n    tipo: string;\n    entidade: string;\n    valor: string;\n    data: Date;\n    descricao: string;\n\n    constructor(values: Object = {}) {\n        Object.assign(this, values);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/alteracao.ts","import { Inspecao } from \"./inspecao\";\nimport { ItemChecklistServico } from \"./item-checklist-servico\";\n\nexport class Servico {\n\n    id: number = 0;\n    idGuidServico: string = '';\n    descricao: string = '';\n    tipo: string = '';\n    idObra: number = 0;\n    idChecklist: number = 0;\n    idChecklistGuid: string = '';\n    idArea: number = 0;\n    idAreaGuid: string = \"\";\n    metaAprovacao: number = 90;\n    status: number = 0;\n    situacao: string = 'Em aberto';\n    delete: boolean = false;\n    dataHoraInclusao: Date = new Date();\n    dataHoraAlteracao: Date = new Date();\n\n    inspecoesObra: Inspecao[] = [];\n    itensChecklistServico: ItemChecklistServico[] = [];\n\n    constructor(values: Object = {}) {\n        Object.assign(this, values);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/servico.ts","import { Servico } from \"./servico\";\n\nexport class Area {\n    \n    id: number = 0;\n    idGuid: string = '';\n    idObra: number = 0;\n    descricao: string;\n    status: number = 0;\n    situacao: string = 'Em aberto';\n    delete: boolean = false;\n\n    servicos: Servico[] = [];\n\n    constructor(values: Object = {}) {\n        Object.assign(this, values);\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/area.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavParams, ViewController } from 'ionic-angular';\nimport { Area } from '../../../models/area';\nimport { ItemChecklist } from '../../../models/item-checklist';\nimport { Storage } from '@ionic/storage';\nimport { Alteracao } from '../../../models/alteracao';\nimport { ToastService } from '../../../utils/toast-service';\nimport { UUID } from 'angular2-uuid';\nimport { Servico } from '../../../models/servico';\nimport { IonicSelectableComponent } from 'ionic-selectable';\nimport { StorageServiceUtils } from '../../../utils/storage-service-utils';\n\n@IonicPage()\n@Component({\n  selector: 'page-area-cadastro',\n  templateUrl: 'area-cadastro.html'\n})\n\nexport class AreaCadastroPage {\n\n  obraId: number;\n  itens: number[] = [];\n  area: Area = new Area();\n\n  opcoesItens: ItemChecklist[] = [];\n  opcoesEscolhidas: ItemChecklist[] = [];\n  servicosEscolhidos: number[] = [];\n  servicosEscolhidosNovos: string[] = [];\n\n  constructor(\n    public storage: Storage,\n    public navParams: NavParams,\n    public storageServiceUtils: StorageServiceUtils,\n    public toastService: ToastService,\n    public viewCtrl: ViewController\n  ) {\n    this.obraId = this.navParams.data.obraId;\n    this.obterItensChecklist();\n  }\n\n  obterItensChecklist() {\n    this.storage.ready().then(() => {\n      this.storage.get('itensChecklist').then(\n        itens => {\n          this.opcoesItens = itens;\n          this.opcoesItens.forEach(item => {\n            item.descricao = item.codigo + \" - \" + item.descricao;\n            item.idGuid = item.idGuid ? item.idGuid : (item.id + \"\");\n          });\n        }\n      );\n    });\n  }\n\n  setaServicoEscolhido(event: { component: IonicSelectableComponent, value: any }) {\n    this.servicosEscolhidos = event.value.map(x => x.id);\n    this.servicosEscolhidosNovos = event.value.map(x => x.idGuid);\n\n    this.servicosEscolhidos = this.servicosEscolhidos.filter(x => x != 0);\n    this.servicosEscolhidosNovos = this.servicosEscolhidosNovos.filter(x => x.length > 10);\n  }\n\n  salvar(formValido) {\n    if (formValido) {\n      this.area.idGuid = UUID.UUID();\n\n      this.servicosEscolhidos.forEach(item => {\n        let servico: Servico = new Servico();\n\n        servico.idGuidServico = UUID.UUID();\n        servico.idChecklist = item;\n        servico.idObra = this.obraId;\n        servico.idAreaGuid = this.area.idGuid;\n\n        let servicoEscolhido = this.opcoesItens.find(x => x.id == item);\n        servico.itensChecklistServico = servicoEscolhido.itensChecklistServico;\n        servico.descricao = servicoEscolhido.descricao;\n        servico.tipo = servicoEscolhido.tipo;\n\n        this.area.servicos.push(servico);\n      });\n\n      this.servicosEscolhidosNovos.forEach(item => {\n        let servico: Servico = new Servico();\n\n        servico.idGuidServico = UUID.UUID();\n        servico.idChecklistGuid = item;\n        servico.idObra = this.obraId;\n        servico.idAreaGuid = this.area.idGuid;\n\n        let servicoEscolhido = this.opcoesItens.find(x => x.idGuid == item);\n        servico.itensChecklistServico = servicoEscolhido.itensChecklistServico;\n        servico.descricao = servicoEscolhido.descricao;\n        servico.tipo = servicoEscolhido.tipo;\n\n        this.area.servicos.push(servico);\n      });\n\n      this.storage.ready().then(() => {\n        let atualizacoesArray: Alteracao[] = [];\n        this.storage.get('atualizacoes').then(\n          atualizacoes => {\n            this.area.idObra = this.obraId;\n            let alteracao = new Alteracao({ id: UUID.UUID(), idArea: this.area.id, idGuidArea: this.area.idGuid, tipo: \"Insert\", entidade: \"Area\", valor: JSON.stringify(this.area), data: new Date(), descricao: \"Inserção da área: \" + this.area.descricao, obraId: this.obraId });\n            if (atualizacoes) {\n              atualizacoesArray = atualizacoes;\n              atualizacoesArray.push(alteracao);\n            } else {\n              atualizacoesArray.push(alteracao);\n            }\n            this.storage.set('atualizacoes', atualizacoesArray);\n            this.atualizarObra();\n          }\n        );\n      });\n    } else {\n      this.toastService.presentToastWarning(\"Preencha todos os campos.\");\n    }\n  }\n\n  async atualizarObra() {\n    let obras = await this.storageServiceUtils.montarObra();\n    this.area.situacao = this.area.status == 0 ? 'Em aberto' : 'Finalizado';\n    obras.find(x => x.id == this.obraId).areas.unshift(this.area);\n    this.storageServiceUtils.armazenarObraNoStorage(obras);\n    this.viewCtrl.dismiss(this.area);\n  }\n\n  voltar() {\n    this.viewCtrl.dismiss(null);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/area/cadastro/area-cadastro.ts"],"sourceRoot":""}
=======
{"version":3,"sources":["../../src/pages/area/cadastro/area-cadastro.module.ts","../../node_modules/angular2-uuid/index.js","../../src/models/alteracao.ts","../../src/models/servico.ts","../../src/models/area.ts","../../src/pages/area/cadastro/area-cadastro.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AreaCadastroPage } from './area-cadastro';\r\nimport { IonicSelectableModule } from 'ionic-selectable';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AreaCadastroPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AreaCadastroPage),\r\n    IonicSelectableModule\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class AreaCadastroPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/area/cadastro/area-cadastro.module.ts","\"use strict\";\nvar UUID = (function () {\n    function UUID() {\n        // no-op\n    }\n    UUID.UUID = function () {\n        if (typeof (window) !== \"undefined\" && typeof (window.crypto) !== \"undefined\" && typeof (window.crypto.getRandomValues) !== \"undefined\") {\n            // If we have a cryptographically secure PRNG, use that\n            // http://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript\n            var buf = new Uint16Array(8);\n            window.crypto.getRandomValues(buf);\n            return (this.pad4(buf[0]) + this.pad4(buf[1]) + \"-\" + this.pad4(buf[2]) + \"-\" + this.pad4(buf[3]) + \"-\" + this.pad4(buf[4]) + \"-\" + this.pad4(buf[5]) + this.pad4(buf[6]) + this.pad4(buf[7]));\n        }\n        else {\n            // Otherwise, just use Math.random\n            // https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n            // https://stackoverflow.com/questions/11605068/why-does-jshint-argue-against-bitwise-operators-how-should-i-express-this-code\n            return this.random4() + this.random4() + \"-\" + this.random4() + \"-\" + this.random4() + \"-\" +\n                this.random4() + \"-\" + this.random4() + this.random4() + this.random4();\n        }\n    };\n    UUID.pad4 = function (num) {\n        var ret = num.toString(16);\n        while (ret.length < 4) {\n            ret = \"0\" + ret;\n        }\n        return ret;\n    };\n    UUID.random4 = function () {\n        return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n    };\n    return UUID;\n}());\nexports.UUID = UUID;\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/angular2-uuid/index.js\n// module id = 781\n// module chunks = 4 5 9 10 11 12 14 15 18","export class Alteracao {\r\n    \r\n    id: string;\r\n    obraId: number;\r\n\r\n    idArea: number;\r\n    idGuidArea: string;\r\n\r\n    idServico: number;\r\n    idGuidServico: string;\r\n\r\n    idInspecao: number;\r\n    idGuidInspecao: string;\r\n\r\n    idOcorrencia: number;\r\n    idGuidOcorrencia: string;\r\n\r\n    idRealizadoPor: number;\r\n    idGuidRealizadoPor: string;\r\n\r\n    tipo: string;\r\n    entidade: string;\r\n    valor: string;\r\n    data: Date;\r\n    descricao: string;\r\n\r\n    constructor(values: Object = {}) {\r\n        Object.assign(this, values);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/alteracao.ts","import { Inspecao } from \"./inspecao\";\r\nimport { ItemChecklistServico } from \"./item-checklist-servico\";\r\n\r\nexport class Servico {\r\n\r\n    id: number = 0;\r\n    idGuidServico: string = '';\r\n    descricao: string = '';\r\n    tipo: string = '';\r\n    idObra: number = 0;\r\n    idChecklist: number = 0;\r\n    idChecklistGuid: string = '';\r\n    idArea: number = 0;\r\n    idAreaGuid: string = \"\";\r\n    metaAprovacao: number = 90;\r\n    status: number = 0;\r\n    situacao: string = 'Em aberto';\r\n    delete: boolean = false;\r\n    dataHoraInclusao: Date = new Date();\r\n    dataHoraAlteracao: Date = new Date();\r\n\r\n    inspecoesObra: Inspecao[] = [];\r\n    itensChecklistServico: ItemChecklistServico[] = [];\r\n\r\n    constructor(values: Object = {}) {\r\n        Object.assign(this, values);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/servico.ts","import { Servico } from \"./servico\";\r\n\r\nexport class Area {\r\n    \r\n    id: number = 0;\r\n    idGuid: string = '';\r\n    idObra: number = 0;\r\n    descricao: string;\r\n    status: number = 0;\r\n    situacao: string = 'Em aberto';\r\n    delete: boolean = false;\r\n\r\n    servicos: Servico[] = [];\r\n\r\n    constructor(values: Object = {}) {\r\n        Object.assign(this, values);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/area.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavParams, ViewController } from 'ionic-angular';\r\nimport { Area } from '../../../models/area';\r\nimport { ItemChecklist } from '../../../models/item-checklist';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Alteracao } from '../../../models/alteracao';\r\nimport { ToastService } from '../../../utils/toast-service';\r\nimport { UUID } from 'angular2-uuid';\r\nimport { Servico } from '../../../models/servico';\r\nimport { IonicSelectableComponent } from 'ionic-selectable';\r\nimport { StorageServiceUtils } from '../../../utils/storage-service-utils';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-area-cadastro',\r\n  templateUrl: 'area-cadastro.html'\r\n})\r\n\r\nexport class AreaCadastroPage {\r\n\r\n  obraId: number;\r\n  itens: number[] = [];\r\n  area: Area = new Area();\r\n\r\n  opcoesItens: ItemChecklist[] = [];\r\n  opcoesEscolhidas: ItemChecklist[] = [];\r\n  servicosEscolhidos: number[] = [];\r\n  servicosEscolhidosNovos: string[] = [];\r\n\r\n  constructor(\r\n    public storage: Storage,\r\n    public navParams: NavParams,\r\n    public storageServiceUtils: StorageServiceUtils,\r\n    public toastService: ToastService,\r\n    public viewCtrl: ViewController\r\n  ) {\r\n    this.obraId = this.navParams.data.obraId;\r\n    this.obterItensChecklist();\r\n  }\r\n\r\n  obterItensChecklist() {\r\n    this.storage.ready().then(() => {\r\n      this.storage.get('itensChecklist').then(\r\n        itens => {\r\n          this.opcoesItens = itens;\r\n          this.opcoesItens.forEach(item => {\r\n            item.descricao = item.codigo + \" - \" + item.descricao;\r\n            item.idGuid = item.idGuid ? item.idGuid : (item.id + \"\");\r\n          });\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  setaServicoEscolhido(event: { component: IonicSelectableComponent, value: any }) {\r\n    this.servicosEscolhidos = event.value.map(x => x.id);\r\n    this.servicosEscolhidosNovos = event.value.map(x => x.idGuid);\r\n\r\n    this.servicosEscolhidos = this.servicosEscolhidos.filter(x => x != 0);\r\n    this.servicosEscolhidosNovos = this.servicosEscolhidosNovos.filter(x => x.length > 10);\r\n  }\r\n\r\n  salvar(formValido) {\r\n    if (formValido) {\r\n      this.area.idGuid = UUID.UUID();\r\n\r\n      this.servicosEscolhidos.forEach(item => {\r\n        let servico: Servico = new Servico();\r\n\r\n        servico.idGuidServico = UUID.UUID();\r\n        servico.idChecklist = item;\r\n        servico.idObra = this.obraId;\r\n        servico.idAreaGuid = this.area.idGuid;\r\n\r\n        let servicoEscolhido = this.opcoesItens.find(x => x.id == item);\r\n        servico.itensChecklistServico = servicoEscolhido.itensChecklistServico;\r\n        servico.descricao = servicoEscolhido.descricao;\r\n        servico.tipo = servicoEscolhido.tipo;\r\n\r\n        this.area.servicos.push(servico);\r\n      });\r\n\r\n      this.servicosEscolhidosNovos.forEach(item => {\r\n        let servico: Servico = new Servico();\r\n\r\n        servico.idGuidServico = UUID.UUID();\r\n        servico.idChecklistGuid = item;\r\n        servico.idObra = this.obraId;\r\n        servico.idAreaGuid = this.area.idGuid;\r\n\r\n        let servicoEscolhido = this.opcoesItens.find(x => x.idGuid == item);\r\n        servico.itensChecklistServico = servicoEscolhido.itensChecklistServico;\r\n        servico.descricao = servicoEscolhido.descricao;\r\n        servico.tipo = servicoEscolhido.tipo;\r\n\r\n        this.area.servicos.push(servico);\r\n      });\r\n\r\n      this.storage.ready().then(() => {\r\n        let atualizacoesArray: Alteracao[] = [];\r\n        this.storage.get('atualizacoes').then(\r\n          atualizacoes => {\r\n            this.area.idObra = this.obraId;\r\n            let alteracao = new Alteracao({ id: UUID.UUID(), idArea: this.area.id, idGuidArea: this.area.idGuid, tipo: \"Insert\", entidade: \"Area\", valor: JSON.stringify(this.area), data: new Date(), descricao: \"Inserção da área: \" + this.area.descricao, obraId: this.obraId });\r\n            if (atualizacoes) {\r\n              atualizacoesArray = atualizacoes;\r\n              atualizacoesArray.push(alteracao);\r\n            } else {\r\n              atualizacoesArray.push(alteracao);\r\n            }\r\n            this.storage.set('atualizacoes', atualizacoesArray);\r\n            this.atualizarObra();\r\n          }\r\n        );\r\n      });\r\n    } else {\r\n      this.toastService.presentToastWarning(\"Preencha todos os campos.\");\r\n    }\r\n  }\r\n\r\n  async atualizarObra() {\r\n    let obras = await this.storageServiceUtils.montarObra();\r\n    this.area.situacao = this.area.status == 0 ? 'Em aberto' : 'Finalizado';\r\n    obras.find(x => x.id == this.obraId).areas.unshift(this.area);\r\n    this.storageServiceUtils.armazenarObraNoStorage(obras);\r\n    this.viewCtrl.dismiss(this.area);\r\n  }\r\n\r\n  voltar() {\r\n    this.viewCtrl.dismiss(null);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/area/cadastro/area-cadastro.ts"],"sourceRoot":""}
>>>>>>> 1a8b13dc8a7e16c35a632b42a8cb34876192fe7d
